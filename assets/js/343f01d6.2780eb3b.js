"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2573],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>c});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=a.createContext({}),m=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=m(e.components);return a.createElement(o.Provider,{value:n},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},k=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=m(t),k=l,c=s["".concat(o,".").concat(k)]||s[k]||d[k]||r;return t?a.createElement(c,i(i({ref:n},u),{},{components:t})):a.createElement(c,i({ref:n},u))}));function c(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=k;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p[s]="string"==typeof e?e:l,i[1]=p;for(var m=2;m<r;m++)i[m]=t[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},1170:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>p,toc:()=>m});var a=t(7462),l=(t(7294),t(3905));const r={sidebar_position:301,sidebar_label:"\u4f7f\u7528Rust\u5f00\u53d1",sidebar_class_name:"green"},i="\u4f7f\u7528Rust\u5f00\u53d1",p={unversionedId:"Solana-docs/writing-programs/developing-with-rust",id:"Solana-docs/writing-programs/developing-with-rust",title:"\u4f7f\u7528Rust\u5f00\u53d1",description:"Solana\u652f\u6301\u4f7f\u7528Rust\u7f16\u7a0b\u8bed\u8a00\u7f16\u5199\u94fe\u4e0a\u7a0b\u5e8f\u3002",source:"@site/docs/Solana-docs/writing-programs/developing-with-rust.md",sourceDirName:"Solana-docs/writing-programs",slug:"/Solana-docs/writing-programs/developing-with-rust",permalink:"/all-in-one-solana/docs/Solana-docs/writing-programs/developing-with-rust",draft:!1,editUrl:"https://github.com/CreatorsDAO/all-in-one-solana/edit/main/docs/Solana-docs/writing-programs/developing-with-rust.md",tags:[],version:"current",sidebarPosition:301,frontMatter:{sidebar_position:301,sidebar_label:"\u4f7f\u7528Rust\u5f00\u53d1",sidebar_class_name:"green"},sidebar:"tutorialSidebar",previous:{title:"Writing Program",permalink:"/all-in-one-solana/docs/Solana-docs/writing-programs/"}},o={},m=[{value:"\u9879\u76ee\u5e03\u5c40",id:"\u9879\u76ee\u5e03\u5c40",level:2},{value:"\u9879\u76ee\u4f9d\u8d56",id:"\u9879\u76ee\u4f9d\u8d56",level:2},{value:"\u5982\u4f55\u5efa\u9020",id:"\u5982\u4f55\u5efa\u9020",level:2},{value:"\u5982\u4f55\u8fdb\u884c\u6d4b\u8bd5",id:"\u5982\u4f55\u8fdb\u884c\u6d4b\u8bd5",level:2},{value:"\u7a0b\u5e8f\u5165\u53e3\u70b9",id:"\u7a0b\u5e8f\u5165\u53e3\u70b9",level:2},{value:"\u53c2\u6570\u53cd\u5e8f\u5217\u5316",id:"\u53c2\u6570\u53cd\u5e8f\u5217\u5316",level:3},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:3},{value:"\u5806",id:"\u5806",level:2},{value:"\u9650\u5236",id:"\u9650\u5236",level:2},{value:"\u6839\u636e<code>rand</code>\u7684\u60c5\u51b5\u800c\u5b9a",id:"\u6839\u636erand\u7684\u60c5\u51b5\u800c\u5b9a",level:2},{value:"\u8bb0\u5f55",id:"\u8bb0\u5f55",level:2},{value:"\u60ca\u614c\u5931\u63aa",id:"\u60ca\u614c\u5931\u63aa",level:2},{value:"\u81ea\u5b9a\u4e49\u6050\u614c\u5904\u7406\u7a0b\u5e8f",id:"\u81ea\u5b9a\u4e49\u6050\u614c\u5904\u7406\u7a0b\u5e8f",level:3},{value:"\u8ba1\u7b97\u9884\u7b97",id:"\u8ba1\u7b97\u9884\u7b97",level:2},{value:"ELF Dump",id:"elf-dump",level:2},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50",level:2}],u={toc:m},s="wrapper";function d(e){let{components:n,...t}=e;return(0,l.kt)(s,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u4f7f\u7528rust\u5f00\u53d1"},"\u4f7f\u7528Rust\u5f00\u53d1"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u652f\u6301\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7f16\u7a0b\u8bed\u8a00\u7f16\u5199\u94fe\u4e0a\u7a0b\u5e8f\u3002"),(0,l.kt)("h2",{id:"\u9879\u76ee\u5e03\u5c40"},"\u9879\u76ee\u5e03\u5c40"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7a0b\u5e8f\u9075\u5faa\u5178\u578b\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u9879\u76ee\u5e03\u5c40\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"/inc/\n/src/\n/Cargo.toml\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7a0b\u5e8f\u53ef\u4ee5\u76f4\u63a5\u4f9d\u8d56\u5f7c\u6b64\uff0c\u4ee5\u4fbf\u5728\u8fdb\u884c\u8de8\u7a0b\u5e8f\u8c03\u7528\u65f6\u83b7\u5f97\u6307\u4ee4\u52a9\u624b\u7684\u8bbf\u95ee\u6743\u9650\u3002\u5728\u8fd9\u6837\u505a\u65f6\uff0c\u91cd\u8981\u7684\u662f\u4e0d\u8981\u5f15\u5165\u4f9d\u8d56\u7a0b\u5e8f\u7684\u5165\u53e3\u7b26\u53f7\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u4e0e\u7a0b\u5e8f\u81ea\u8eab\u7684\u7b26\u53f7\u51b2\u7a81\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u7a0b\u5e8f\u5e94\u8be5\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"Cargo.toml")," \u4e2d\u5b9a\u4e49\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"no-entrypoint")," \u529f\u80fd\uff0c\u5e76\u4f7f\u7528\u5b83\u6765\u6392\u9664\u5165\u53e3\u70b9\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b9a\u4e49\u7279\u5f81"),(0,l.kt)("li",{parentName:"ul"},"\u6392\u9664\u5165\u53e3\u70b9")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u5f53\u5176\u4ed6\u7a0b\u5e8f\u5c06\u6b64\u7a0b\u5e8f\u4f5c\u4e3a\u4f9d\u8d56\u9879\u65f6\uff0c\u5e94\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"no-entrypoint")," \u529f\u80fd\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5305\u542b\u65e0\u5165\u53e3\u70b9")),(0,l.kt)("h2",{id:"\u9879\u76ee\u4f9d\u8d56"},"\u9879\u76ee\u4f9d\u8d56"),(0,l.kt)("p",null,"\u81f3\u5c11\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Solana Rust"),"\u7a0b\u5e8f\u5fc5\u987b\u5f15\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"solana-program crate"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Solana SBF"),"\u7a0b\u5e8f\u6709\u4e00\u4e9b\u9650\u5236\uff0c\u53ef\u80fd\u4f1a\u963b\u6b62\u67d0\u4e9b",(0,l.kt)("inlineCode",{parentName:"p"},"crate"),"\u4f5c\u4e3a\u4f9d\u8d56\u9879\u7684\u5305\u542b\uff0c\u6216\u8005\u9700\u8981\u7279\u6b8a\u5904\u7406\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9700\u8981\u7684\u67b6\u6784\u662f\u5b98\u65b9\u5de5\u5177\u94fe\u652f\u6301\u7684\u5b50\u96c6\u3002\u9664\u975e\u5bf9\u8be5 ",(0,l.kt)("inlineCode",{parentName:"li"},"crate")," \u8fdb\u884c\u5206\u53c9\u5e76\u6dfb\u52a0 ",(0,l.kt)("inlineCode",{parentName:"li"},"SBF")," \u5230\u90a3\u4e9b\u67b6\u6784\u68c0\u67e5\u4e2d\uff0c\u5426\u5219\u6ca1\u6709\u5176\u4ed6\u89e3\u51b3\u529e\u6cd5\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u7bb1\u5b50\u53ef\u80fd\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"rand")," \uff0c\u800c",(0,l.kt)("inlineCode",{parentName:"li"},"Solana"),"\u7684\u786e\u5b9a\u6027\u7a0b\u5e8f\u73af\u5883\u4e0d\u652f\u6301\u5b83\u3002\u8981\u5305\u542b\u4e00\u4e2a\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"rand")," \u7684\u7bb1\u5b50\uff0c\u8bf7\u53c2\u8003\u4f9d\u8d56\u4e8e",(0,l.kt)("inlineCode",{parentName:"li"},"Rand"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5373\u4f7f\u7a0b\u5e8f\u672c\u8eab\u6ca1\u6709\u5305\u542b\u5806\u6808\u6ea2\u51fa\u7684\u4ee3\u7801\uff0c\u5806\u6808\u4ecd\u53ef\u80fd\u6ea2\u51fa\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u5806\u6808\u3002")),(0,l.kt)("h2",{id:"\u5982\u4f55\u5efa\u9020"},"\u5982\u4f55\u5efa\u9020"),(0,l.kt)("p",null,"\u9996\u5148\u8bbe\u7f6e\u73af\u5883\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4ece",(0,l.kt)("inlineCode",{parentName:"li"}," https://rustup.rs/ \u5b89\u88c5\u6700\u65b0\u7684\u7a33\u5b9a\u7248"),"Rust`\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u6700\u65b0\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"Solana"),"\u547d\u4ee4\u884c\u5de5\u5177")),(0,l.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u6b63\u5e38\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Cargo"),"\u6784\u5efa\u6765\u6784\u5efa\u9488\u5bf9\u60a8\u7684\u4e3b\u673a\u673a\u5668\u7684\u7a0b\u5e8f\uff0c\u8fd9\u4e9b\u7a0b\u5e8f\u53ef\u7528\u4e8e\u5355\u5143\u6d4b\u8bd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ cargo build\n")),(0,l.kt)("p",null,"\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"Solana SBF"),"\u76ee\u6807\u6784\u5efa\u4e00\u4e2a\u7279\u5b9a\u7684\u7a0b\u5e8f\uff0c\u6bd4\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"SPL Token"),"\uff0c\u53ef\u4ee5\u90e8\u7f72\u5230\u96c6\u7fa4\u4e2d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd <the program directory>\n$ cargo build-bpf\n")),(0,l.kt)("h2",{id:"\u5982\u4f55\u8fdb\u884c\u6d4b\u8bd5"},"\u5982\u4f55\u8fdb\u884c\u6d4b\u8bd5"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8c03\u7528\u7a0b\u5e8f\u51fd\u6570\u6765\u8fdb\u884c\u4f20\u7edf\u7684\u5355\u5143\u6d4b\u8bd5\u3002"),(0,l.kt)("p",null,"\u4e3a\u4e86\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u5728\u66f4\u63a5\u8fd1\u5b9e\u9645\u96c6\u7fa4\u7684\u73af\u5883\u4e2d\u8fdb\u884c\u6d4b\u8bd5\uff0c\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"program-test crate"),"\u3002\u8be5 ",(0,l.kt)("inlineCode",{parentName:"p"},"program-test crate"),"\u4f1a\u542f\u52a8\u4e00\u4e2a\u672c\u5730\u8fd0\u884c\u65f6\u5b9e\u4f8b\uff0c\u5e76\u5141\u8bb8\u6d4b\u8bd5\u53d1\u9001\u591a\u4e2a\u4e8b\u52a1\uff0c\u540c\u65f6\u5728\u6d4b\u8bd5\u671f\u95f4\u4fdd\u6301\u72b6\u6001\u3002"),(0,l.kt)("p",null,"\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,l.kt)("inlineCode",{parentName:"p"},"sysvar"),"\u793a\u4f8b\u4e2d\u7684\u6d4b\u8bd5\uff0c\u8be5\u6d4b\u8bd5\u663e\u793a\u4e86\u5305\u542b",(0,l.kt)("inlineCode",{parentName:"p"},"sysvar"),"\u8d26\u6237\u7684\u6307\u4ee4\u5982\u4f55\u88ab\u7a0b\u5e8f\u53d1\u9001\u548c\u5904\u7406\u3002"),(0,l.kt)("h2",{id:"\u7a0b\u5e8f\u5165\u53e3\u70b9"},"\u7a0b\u5e8f\u5165\u53e3\u70b9"),(0,l.kt)("p",null,"\u7a0b\u5e8f\u5bfc\u51fa\u4e00\u4e2a\u5df2\u77e5\u7684\u5165\u53e3\u7b26\u53f7\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u8fd0\u884c\u65f6\u5728\u8c03\u7528\u7a0b\u5e8f\u65f6\u67e5\u627e\u5e76\u8c03\u7528\u8be5\u7b26\u53f7\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u652f\u6301\u591a\u4e2a\u7248\u672c\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"BPF"),"\u52a0\u8f7d\u5668\uff0c\u5165\u53e3\u70b9\u53ef\u80fd\u4f1a\u56e0\u6b64\u800c\u6709\u6240\u4e0d\u540c\u3002\u7a0b\u5e8f\u5fc5\u987b\u4e3a\u76f8\u540c\u7684\u52a0\u8f7d\u5668\u7f16\u5199\u5e76\u90e8\u7f72\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u52a0\u8f7d\u5668\u7684\u5e38\u89c1\u95ee\u9898\u89e3\u7b54\u90e8\u5206\u3002"),(0,l.kt)("p",null,"\u76ee\u524d\u6709\u4e24\u4e2a\u652f\u6301\u7684\u52a0\u8f7d\u5668",(0,l.kt)("inlineCode",{parentName:"p"},"BPF Loader"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"BPF"),"\u52a0\u8f7d\u5668\u5df2\u5f03\u7528"),(0,l.kt)("p",null,"\u5b83\u4eec\u4e24\u4e2a\u90fd\u6709\u76f8\u540c\u7684\u539f\u59cb\u5165\u53e3\u70b9\u5b9a\u4e49\uff0c\u4e0b\u9762\u662f\u8fd0\u884c\u65f6\u67e5\u627e\u5e76\u8c03\u7528\u7684\u539f\u59cb\u7b26\u53f7\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},'#[no_mangle]\npub unsafe extern "C" fn entrypoint(input: *mut u8) -> u64;\n')),(0,l.kt)("p",null,"\u8fd9\u4e2a\u5165\u53e3\u70b9\u63a5\u53d7\u4e00\u4e2a\u901a\u7528\u7684\u5b57\u8282\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u5e8f\u5217\u5316\u7684\u7a0b\u5e8f\u53c2\u6570\uff08\u7a0b\u5e8f",(0,l.kt)("inlineCode",{parentName:"p"},"ID"),"\u3001\u8d26\u6237\u3001\u6307\u4ee4\u6570\u636e\u7b49\uff09\u3002\u4e3a\u4e86\u53cd\u5e8f\u5217\u5316\u53c2\u6570\uff0c\u6bcf\u4e2a\u52a0\u8f7d\u5668\u90fd\u5305\u542b\u81ea\u5df1\u7684\u5305\u88c5\u5b8f\uff0c\u5bfc\u51fa\u539f\u59cb\u5165\u53e3\u70b9\uff0c\u53cd\u5e8f\u5217\u5316\u53c2\u6570\uff0c\u8c03\u7528\u7528\u6237\u5b9a\u4e49\u7684\u6307\u4ee4\u5904\u7406\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u3002"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u5165\u53e3\u70b9\u5b8f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BPF"),"\u52a0\u8f7d\u5668\u7684\u5165\u53e3\u5b8f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BPF Loader"),"\u5e9f\u5f03\u7684\u5165\u53e3\u5b8f")),(0,l.kt)("p",null,"\u7a0b\u5e8f\u5b9a\u4e49\u7684\u6307\u4ee4\u5904\u7406\u51fd\u6570\uff0c\u5165\u53e3\u70b9\u5b8f\u8c03\u7528\u7684\u51fd\u6570\u5fc5\u987b\u7b26\u5408\u4ee5\u4e0b\u5f62\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},"pub type ProcessInstruction =\n    fn(program_id: &Pubkey, accounts: &[AccountInfo], instruction_data: &[u8]) -> ProgramResult;\n")),(0,l.kt)("h3",{id:"\u53c2\u6570\u53cd\u5e8f\u5217\u5316"},"\u53c2\u6570\u53cd\u5e8f\u5217\u5316"),(0,l.kt)("p",null,"\u6bcf\u4e2a\u52a0\u8f7d\u5668\u90fd\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8f85\u52a9\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u7a0b\u5e8f\u7684\u8f93\u5165\u53c2\u6570\u53cd\u5e8f\u5217\u5316\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7c7b\u578b\u3002\u5165\u53e3\u70b9\u5b8f\u4f1a\u81ea\u52a8\u8c03\u7528\u53cd\u5e8f\u5217\u5316\u8f85\u52a9\u51fd\u6570\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BPF"),"\u52a0\u8f7d\u5668\u53cd\u5e8f\u5217\u5316"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BPF"),"\u52a0\u8f7d\u5668\u5df2\u5f03\u7528\u53cd\u5e8f\u5217\u5316")),(0,l.kt)("p",null,"\u4e00\u4e9b\u7a0b\u5e8f\u53ef\u80fd\u5e0c\u671b\u81ea\u884c\u6267\u884c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u4f9b\u81ea\u5df1\u7684\u539f\u59cb\u5165\u53e3\u70b9\u5b9e\u73b0\u3002\u8bf7\u6ce8\u610f\uff0c\u63d0\u4f9b\u7684\u53cd\u5e8f\u5217\u5316\u51fd\u6570\u4f1a\u4fdd\u7559\u5bf9\u5e8f\u5217\u5316\u5b57\u8282\u6570\u7ec4\u7684\u5f15\u7528\uff0c\u4ee5\u4fbf\u7a0b\u5e8f\u53ef\u4ee5\u4fee\u6539\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"lamports"),"\u3001\u8d26\u6237\u6570\u636e\uff09\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u662f\uff0c\u52a0\u8f7d\u5668\u5728\u8fd4\u56de\u65f6\u4f1a\u8bfb\u53d6\u8fd9\u4e9b\u4fee\u6539\uff0c\u4ee5\u4fbf\u8fdb\u884c\u63d0\u4ea4\u3002\u5982\u679c\u7a0b\u5e8f\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684\u53cd\u5e8f\u5217\u5316\u51fd\u6570\uff0c\u9700\u8981\u786e\u4fdd\u5c06\u7a0b\u5e8f\u5e0c\u671b\u63d0\u4ea4\u7684\u4efb\u4f55\u4fee\u6539\u5199\u56de\u8f93\u5165\u5b57\u8282\u6570\u7ec4\u4e2d\u3002"),(0,l.kt)("p",null,"\u6709\u5173\u52a0\u8f7d\u7a0b\u5e8f\u5982\u4f55\u5e8f\u5217\u5316\u7a0b\u5e8f\u8f93\u5165\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u8f93\u5165\u53c2\u6570\u5e8f\u5217\u5316\u6587\u6863\u3002"),(0,l.kt)("h3",{id:"\u6570\u636e\u7c7b\u578b"},"\u6570\u636e\u7c7b\u578b"),(0,l.kt)("p",null,"\u52a0\u8f7d\u5668\u7684\u5165\u53e3\u70b9\u5b8f\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u8c03\u7528\u7a0b\u5e8f\u5b9a\u4e49\u7684\u6307\u4ee4\u5904\u7406\u51fd\u6570\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},"program_id: &Pubkey,\naccounts: &[AccountInfo],\ninstruction_data: &[u8]\n")),(0,l.kt)("p",null,"\u7a0b\u5e8f",(0,l.kt)("inlineCode",{parentName:"p"},"ID"),"\u662f\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\u7684\u516c\u94a5\u3002"),(0,l.kt)("p",null,"\u8d26\u6237\u662f\u6307\u4ee4\u5f15\u7528\u7684\u8d26\u6237\u7684\u6709\u5e8f\u5207\u7247\uff0c\u5e76\u4ee5",(0,l.kt)("inlineCode",{parentName:"p"},"AccountInfo"),"\u7ed3\u6784\u8868\u793a\u3002\u6570\u7ec4\u4e2d\u8d26\u6237\u7684\u4f4d\u7f6e\u8868\u793a\u5176\u542b\u4e49\uff0c\u4f8b\u5982\uff0c\u5728\u8f6c\u79fb",(0,l.kt)("inlineCode",{parentName:"p"},"lamports"),"\u65f6\uff0c\u6307\u4ee4\u53ef\u4ee5\u5c06\u7b2c\u4e00\u4e2a\u8d26\u6237\u5b9a\u4e49\u4e3a\u6e90\u8d26\u6237\uff0c\u7b2c\u4e8c\u4e2a\u8d26\u6237\u5b9a\u4e49\u4e3a\u76ee\u6807\u8d26\u6237\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"AccountInfo")," \u7ed3\u6784\u7684\u6210\u5458\u662f\u53ea\u8bfb\u7684\uff0c\u9664\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"lamports")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," \u3002\u6839\u636e\u8fd0\u884c\u65f6\u6267\u884c\u7b56\u7565\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u4fee\u6539\u8fd9\u4e24\u4e2a\u6210\u5458\u3002\u8fd9\u4e24\u4e2a\u6210\u5458\u90fd\u53d7\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"Rust")," \u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"RefCell")," \u6784\u9020\u7684\u4fdd\u62a4\uff0c\u56e0\u6b64\u5728\u8bfb\u53d6\u6216\u5199\u5165\u5b83\u4eec\u65f6\u5fc5\u987b\u8fdb\u884c\u501f\u7528\u3002\u539f\u56e0\u662f\u5b83\u4eec\u90fd\u6307\u5411\u539f\u59cb\u8f93\u5165\u5b57\u8282\u6570\u7ec4\uff0c\u4f46\u662f\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"accounts")," \u5207\u7247\u4e2d\u53ef\u80fd\u6709\u591a\u4e2a\u6761\u76ee\u6307\u5411\u540c\u4e00\u4e2a\u8d26\u6237\u3002\u4f7f\u7528 RefCell \u53ef\u4ee5\u786e\u4fdd\u7a0b\u5e8f\u4e0d\u4f1a\u610f\u5916\u5730\u901a\u8fc7\u591a\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"AccountInfo")," \u7ed3\u6784\u5bf9\u540c\u4e00\u5e95\u5c42\u6570\u636e\u6267\u884c\u91cd\u53e0\u7684\u8bfb\u53d6/\u5199\u5165\u64cd\u4f5c\u3002\u5982\u679c\u7a0b\u5e8f\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684\u53cd\u5e8f\u5217\u5316\u51fd\u6570\uff0c\u5e94\u8be5\u6ce8\u610f\u9002\u5f53\u5904\u7406\u91cd\u590d\u7684\u8d26\u6237\u3002"),(0,l.kt)("p",null,"\u6307\u4ee4\u6570\u636e\u662f\u6b63\u5728\u5904\u7406\u7684\u6307\u4ee4\u7684\u901a\u7528\u5b57\u8282\u6570\u7ec4\u3002"),(0,l.kt)("h2",{id:"\u5806"},"\u5806"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7a0b\u5e8f\u901a\u8fc7\u5b9a\u4e49\u81ea\u5b9a\u4e49\u7684\u5806\u76f4\u63a5\u5b9e\u73b0"),(0,l.kt)("p",null,"\u6839\u636e\u5177\u4f53\u9700\u6c42\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u5b9e\u73b0\u81ea\u5b9a\u4e49\u5806\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u81ea\u5b9a\u4e49\u5806\u793a\u4f8b\u3002"),(0,l.kt)("h2",{id:"\u9650\u5236"},"\u9650\u5236"),(0,l.kt)("p",null,"\u94fe\u4e0a\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7a0b\u5e8f\u652f\u6301\u5927\u90e8\u5206",(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"libstd"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"libcore"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"liballoc"),"\uff0c\u4ee5\u53ca\u8bb8\u591a\u7b2c\u4e09\u65b9\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"crate"),"\u3002"),(0,l.kt)("p",null,"\u7531\u4e8e\u8fd9\u4e9b\u7a0b\u5e8f\u5728\u8d44\u6e90\u53d7\u9650\u3001\u5355\u7ebf\u7a0b\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5e76\u4e14\u5177\u6709\u786e\u5b9a\u6027\uff0c\u56e0\u6b64\u5b58\u5728\u4e00\u4e9b\u9650\u5236"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u65e0\u6cd5\u8bbf\u95ee",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rand")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::fs")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::net")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::future")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::process")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::sync")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::task")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::thread")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::time")))),(0,l.kt)("li",{parentName:"ul"},"\u6709\u9650\u8bbf\u95ee\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::hash")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"std::os")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Bincode"),"\u5728\u8ba1\u7b97\u4e0a\u975e\u5e38\u6602\u8d35\uff0c\u65e0\u8bba\u662f\u5728\u5faa\u73af\u8fd8\u662f\u8c03\u7528\u6df1\u5ea6\u65b9\u9762\uff0c\u90fd\u5e94\u8be5\u907f\u514d\u4f7f\u7528"),(0,l.kt)("li",{parentName:"ul"},"\u5e94\u907f\u514d\u4f7f\u7528\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\uff0c\u56e0\u4e3a\u5b83\u4e5f\u4f1a\u6d88\u8017\u8ba1\u7b97\u8d44\u6e90\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u652f\u6301 ",(0,l.kt)("inlineCode",{parentName:"li"},"println!")," \uff0c ",(0,l.kt)("inlineCode",{parentName:"li"},"print!")," \uff0c\u5e94\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"Solana")," \u65e5\u5fd7\u52a9\u624b\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u8fd0\u884c\u65f6\u5728\u5904\u7406\u4e00\u6761\u6307\u4ee4\u65f6\u5bf9\u7a0b\u5e8f\u6267\u884c\u7684\u6307\u4ee4\u6570\u91cf\u65bd\u52a0\u4e86\u9650\u5236\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,l.kt)("a",{parentName:"li",href:"https://docs.solana.com/developing/programming-model/runtime#compute-budget"},"\u8ba1\u7b97\u9884\u7b97"),"\u3002")),(0,l.kt)("h2",{id:"\u6839\u636erand\u7684\u60c5\u51b5\u800c\u5b9a"},"\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"h2"},"rand"),"\u7684\u60c5\u51b5\u800c\u5b9a"),(0,l.kt)("p",null,"\u7a0b\u5e8f\u53d7\u9650\u4e8e\u786e\u5b9a\u6027\u8fd0\u884c\uff0c\u56e0\u6b64\u65e0\u6cd5\u4f7f\u7528\u968f\u673a\u6570\u3002\u6709\u65f6\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u80fd\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"rand")," \u7684\u5305\uff0c\u5373\u4f7f\u8be5\u7a0b\u5e8f\u5e76\u672a\u4f7f\u7528\u4efb\u4f55\u968f\u673a\u6570\u529f\u80fd\u3002\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"rand")," \uff0c\u7f16\u8bd1\u5c06\u5931\u8d25\uff0c\u56e0\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"Solana"),"\u4e0d\u652f\u6301 ",(0,l.kt)("inlineCode",{parentName:"p"},"get-random")," \u3002\u9519\u8bef\u901a\u5e38\u4f1a\u663e\u793a\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'error: target is not supported, for more information see: https://docs.rs/getrandom/#unsupported-targets\n   --\x3e /Users/jack/.cargo/registry/src/github.com-1ecc6299db9ec823/getrandom-0.1.14/src/lib.rs:257:9\n    |\n257 | /         compile_error!("\\\n258 | |             target is not supported, for more information see: \\\n259 | |             https://docs.rs/getrandom/#unsupported-targets\\\n260 | |         ");\n    | |___________^\n')),(0,l.kt)("p",null,"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u4f9d\u8d56\u95ee\u9898\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u4f9d\u8d56\u9879\u6dfb\u52a0\u5230\u7a0b\u5e8f\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Cargo.toml")," \u4e2d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-toml"},'getrandom = { version = "0.1.14", features = ["dummy"] }\n')),(0,l.kt)("p",null,"\u5982\u679c\u4f9d\u8d56\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"getrandom v0.2"),"\uff0c\u8bf7\u6dfb\u52a0\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-toml"},'getrandom = { version = "0.2.2", features = ["custom"] }\n')),(0,l.kt)("h2",{id:"\u8bb0\u5f55"},"\u8bb0\u5f55"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"println!")," \u5b8f\u5728\u8ba1\u7b97\u4e0a\u662f\u6602\u8d35\u7684\u4e14\u4e0d\u53d7\u652f\u6301\u3002\u76f8\u53cd\uff0c\u63d0\u4f9b\u4e86\u8f85\u52a9\u5b8f msg! \u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"msg!")," \u6709\u4e24\u79cd\u5f62\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},'msg!("Hello, world!");\n')),(0,l.kt)("p",null,"\u6216\u8005"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},"msg!(0_64, 1_64, 2_64, 3_64, 4_64);\n")),(0,l.kt)("p",null,"\u4e24\u79cd\u5f62\u5f0f\u90fd\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u7a0b\u5e8f\u65e5\u5fd7\u4e2d\u3002\u5982\u679c\u7a0b\u5e8f\u5e0c\u671b\uff0c\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"format!")," \u6765\u6a21\u62df ",(0,l.kt)("inlineCode",{parentName:"p"},"println!")," \u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},'msg!("Some variable: {:?}", variable);\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8c03\u8bd5\u90e8\u5206"),"\u5305\u542b\u6709\u5173\u4f7f\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u66f4\u591a\u4fe1\u606f\uff0c",(0,l.kt)("strong",{parentName:"p"},"Rust\u793a\u4f8b"),"\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u65e5\u5fd7\u793a\u4f8b\u3002"),(0,l.kt)("h2",{id:"\u60ca\u614c\u5931\u63aa"},"\u60ca\u614c\u5931\u63aa"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Rust"),"\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"panic!")," \u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"assert!")," \u548c\u5185\u90e8",(0,l.kt)("inlineCode",{parentName:"p"},"panic"),"\u7ed3\u679c\u9ed8\u8ba4\u4f1a\u6253\u5370\u5230\u7a0b\u5e8f\u65e5\u5fd7\u4e2d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"INFO  solana_runtime::message_processor] Finalized account CGLhHSuWsp1gT4B7MY2KACqp9RUwQRhcUFfVSuxpSajZ\nINFO  solana_runtime::message_processor] Call SBF program CGLhHSuWsp1gT4B7MY2KACqp9RUwQRhcUFfVSuxpSajZ\nINFO  solana_runtime::message_processor] Program log: Panicked at: 'assertion failed: `(left == right)`\n      left: `1`,\n     right: `2`', rust/panic/src/lib.rs:22:5\nINFO  solana_runtime::message_processor] SBF program consumed 5453 of 200000 units\nINFO  solana_runtime::message_processor] SBF program CGLhHSuWsp1gT4B7MY2KACqp9RUwQRhcUFfVSuxpSajZ failed: BPF program panicked\n")),(0,l.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u6050\u614c\u5904\u7406\u7a0b\u5e8f"},"\u81ea\u5b9a\u4e49\u6050\u614c\u5904\u7406\u7a0b\u5e8f"),(0,l.kt)("p",null,"\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u63d0\u4f9b\u81ea\u5df1\u7684\u5b9e\u73b0\u6765\u8986\u76d6\u9ed8\u8ba4\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"panic"),"\u5904\u7406\u7a0b\u5e8f\u3002"),(0,l.kt)("p",null,"\u9996\u5148\u5728\u7a0b\u5e8f\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Cargo.toml")," \u4e2d\u5b9a\u4e49 ",(0,l.kt)("inlineCode",{parentName:"p"},"custom-panic")," \u529f\u80fd"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-toml"},'[features]\ndefault = ["custom-panic"]\ncustom-panic = []\n')),(0,l.kt)("p",null,"\u7136\u540e\u63d0\u4f9b\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"panic"),"\u5904\u7406\u7a0b\u5e8f\u7684\u5b9e\u73b0\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},'#[cfg(all(feature = "custom-panic", target_os = "solana"))]\n#[no_mangle]\nfn custom_panic(info: &core::panic::PanicInfo<\'_>) {\n    solana_program::msg!("program custom panic enabled");\n    solana_program::msg!("{}", info);\n}\n')),(0,l.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u7247\u6bb5\u4e2d\uff0c\u5c55\u793a\u4e86\u9ed8\u8ba4\u7684\u5b9e\u73b0\uff0c\u4f46\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u7528\u66f4\u9002\u5408\u81ea\u5df1\u9700\u6c42\u7684\u5185\u5bb9\u6765\u66ff\u6362\u5b83\u3002"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u652f\u6301\u5b8c\u6574\u7684\u6050\u614c\u6d88\u606f\u7684\u526f\u4f5c\u7528\u4e4b\u4e00\u662f\u7a0b\u5e8f\u4f1a\u627f\u62c5\u5c06\u66f4\u591a\u7684Rust\u5b9e\u73b0\u5f15\u5165\u7a0b\u5e8f\u5171\u4eab\u5bf9\u8c61\u7684\u6210\u672c\u3002\u5178\u578b\u7684\u7a0b\u5e8f\u5df2\u7ecf\u5f15\u5165\u4e86\u76f8\u5f53\u6570\u91cf\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"libstd")," \uff0c\u53ef\u80fd\u4e0d\u4f1a\u6ce8\u610f\u5230\u5171\u4eab\u5bf9\u8c61\u5927\u5c0f\u7684\u589e\u52a0\u3002\u4f46\u662f\uff0c\u90a3\u4e9b\u660e\u786e\u8bd5\u56fe\u901a\u8fc7\u907f\u514d ",(0,l.kt)("inlineCode",{parentName:"p"},"libstd")," \u6765\u4fdd\u6301\u975e\u5e38\u5c0f\u7684\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u53d7\u5230\u663e\u8457\u5f71\u54cd\uff08\u7ea6",(0,l.kt)("inlineCode",{parentName:"p"},"25kb"),"\uff09\u3002\u4e3a\u4e86\u6d88\u9664\u8fd9\u79cd\u5f71\u54cd\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u63d0\u4f9b\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u6050\u614c\u5904\u7406\u7a0b\u5e8f\uff0c\u5e76\u8fdb\u884c\u7a7a\u5b9e\u73b0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rust"},'#[cfg(all(feature = "custom-panic", target_os = "solana"))]\n#[no_mangle]\nfn custom_panic(info: &core::panic::PanicInfo<\'_>) {\n    // Do nothing to save space\n}\n')),(0,l.kt)("h2",{id:"\u8ba1\u7b97\u9884\u7b97"},"\u8ba1\u7b97\u9884\u7b97"),(0,l.kt)("p",null,"\u4f7f\u7528\u7cfb\u7edf\u8c03\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/solana-labs/solana/blob/d9b0fc0e3eec67dfe4a97d9298b15969b2804fab/sdk/program/src/log.rs#L141"},(0,l.kt)("inlineCode",{parentName:"a"},"sol_log_compute_units()"))," \u8bb0\u5f55\u4e00\u4e2a\u5305\u542b\u7a0b\u5e8f\u5728\u6267\u884c\u505c\u6b62\u4e4b\u524d\u53ef\u4ee5\u6d88\u8017\u7684\u5269\u4f59\u8ba1\u7b97\u5355\u5143\u6570\u91cf\u7684\u6d88\u606f"),(0,l.kt)("p",null,"\u8bf7\u67e5\u770b",(0,l.kt)("a",{parentName:"p",href:"https://docs.solana.com/developing/programming-model/runtime#compute-budget"},"\u8ba1\u7b97\u9884\u7b97"),"\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002"),(0,l.kt)("h2",{id:"elf-dump"},"ELF Dump"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"SBF"),"\u5171\u4eab\u5bf9\u8c61\u7684\u5185\u90e8\u53ef\u4ee5",(0,l.kt)("inlineCode",{parentName:"p"},"dump"),"\u5230\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u7a0b\u5e8f\u7684\u7ec4\u6210\u548c\u8fd0\u884c\u65f6\u7684\u64cd\u4f5c\u3002\u8f6c\u50a8\u6587\u4ef6\u5c06\u5305\u542bELF\u4fe1\u606f\u4ee5\u53ca\u6240\u6709\u7b26\u53f7\u548c\u5b9e\u73b0\u5b83\u4eec\u7684\u6307\u4ee4\u7684\u5217\u8868\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"BPF"),"\u52a0\u8f7d\u5668\u7684\u4e00\u4e9b\u9519\u8bef\u65e5\u5fd7\u6d88\u606f\u5c06\u5f15\u7528\u9519\u8bef\u53d1\u751f\u7684\u7279\u5b9a\u6307\u4ee4\u7f16\u53f7\u3002\u53ef\u4ee5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"ELF"),"\u8f6c\u50a8\u4e2d\u67e5\u627e\u8fd9\u4e9b\u5f15\u7528\uff0c\u4ee5\u786e\u5b9a\u6709\u95ee\u9898\u7684\u6307\u4ee4\u53ca\u5176\u4e0a\u4e0b\u6587\u3002"),(0,l.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"dump"),"\u6587\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd <program directory>\n$ cargo build-bpf --dump\n")),(0,l.kt)("h2",{id:"\u4f8b\u5b50"},"\u4f8b\u5b50"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/solana-labs/solana-program-library/tree/master/examples/rust"},"Solana\u7a0b\u5e8f\u5e93"),"\u7684github\u4ed3\u5e93\u5305\u542b\u4e86\u4e00\u7cfb\u5217\u7684Rust\u793a\u4f8b\u3002"))}d.isMDXComponent=!0}}]);